<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIDAS3.0</title>
    <link rel="icon" href="/static/assets/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/static/assets/favicon.ico" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/static/css/quota-modal.css">
    <link rel="stylesheet" href="/static/css/auth.css">
    <link rel="stylesheet" href="/static/css/processing-progress.css">
    <style>
        /* Global styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Roboto', sans-serif;
            scrollbar-width: thin; /* For Firefox */
        }

        /* Webkit (Chrome, Safari, newer versions of Opera) scrollbar styling */
        *::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        *::-webkit-scrollbar-track {
            background: transparent;
        }

        *::-webkit-scrollbar-thumb {
            background-color: var(--text-muted);
            border-radius: 4px;
            transition: background-color 0.3s ease;
        }

        *::-webkit-scrollbar-thumb:hover {
            background-color: var(--text-secondary);
        }

        /* Dark theme scrollbar */
        [data-theme="dark"] *::-webkit-scrollbar-thumb {
            background-color: var(--text-secondary);
        }

        [data-theme="dark"] *::-webkit-scrollbar-thumb:hover {
            background-color: var(--text-primary);
        }
        
        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow: hidden;
        }
        
        :root {
            /* Light theme variables */
            --bg-primary: #f9fafb;
            --bg-secondary: #f0f0f0;
            --bg-tertiary: #e5e5e5;
            --bg-accent: #555555;
            --text-primary: #111827;
            --text-secondary: #4b5563;
            --text-muted: #6b7280;
            --text-accent: #333333;
            --text-on-accent: #ffffff;
            --border-color: #e5e7eb;
            --message-user-bg: #333333;
            --message-user-text: #ffffff;
            --message-assistant-bg: #ffffff;
            --message-assistant-text: #111827;
            --message-system-bg: #f3f4f6;
            --message-system-text: #4b5563;
            --code-bg: #f3f4f6;
            --thinking-bg: #f3f4f6;
            --thinking-border: #666666;
            --button-hover: #555555;
            --shadow-color: rgba(0, 0, 0, 0.1);
        }
        
        /* Dark theme variables */
        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2a2a2a;
            --bg-tertiary: #3a3a3a;
            --bg-accent: #ffd700; /* Changed to gold for better visibility */
            --text-primary: #ffffff; /* Brighter white for better readability */
            --text-secondary: #e5e7eb; /* Lighter grey for secondary text */
            --text-muted: #9ca3af;
            --text-accent: #ffd700; /* Gold text for accents */
            --text-on-accent: #1a1a1a;
            --border-color: #4b5563;
            --message-user-bg: #ffd700;
            --message-user-text: #1a1a1a;
            --message-assistant-bg: #2a2a2a;
            --message-assistant-text: #f3f4f6;
            --message-system-bg: #2a2a2a;
            --message-system-text: #d1d5db;
            --code-bg: #2a2a2a;
            --thinking-bg: #2a2a2a;
            --thinking-border: #ffd700; /* Gold border */
            --button-hover: #ffcc00; /* Slightly darker gold for button hover */
            --shadow-color: rgba(0, 0, 0, 0.3);
        }
        
        /* Specific button styling for dark theme */
        [data-theme="dark"] .new-chat-button,
        [data-theme="dark"] .sidebar-button,
        [data-theme="dark"] .send-button,
        [data-theme="dark"] .file-upload-button,
        [data-theme="dark"] .title-action-button {
            background-color: var(--bg-accent);
            color: var(--text-on-accent);
            border: none;
        }
        
        [data-theme="dark"] .new-chat-button:hover,
        [data-theme="dark"] .sidebar-button:hover,
        [data-theme="dark"] .send-button:hover,
        [data-theme="dark"] .file-upload-button:hover,
        [data-theme="dark"] .title-action-button:hover {
            background-color: var(--button-hover);
            transform: scale(1.05);
        }
        
        [data-theme="dark"] .header {
            background-color: var(--bg-secondary);
            border-bottom: 2px solid var(--text-accent); /* Gold accent line */
        }
        
        [data-theme="dark"] .chat-title,
        [data-theme="dark"] .chat-model,
        [data-theme="dark"] .model-select {
            color: var(--text-primary); /* Use bright white for better contrast */
        }
        
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        .header {
            background-color: var(--bg-accent);
            color: var(--text-on-accent);
            padding: 0.75rem 1.5rem;
            display: flex;
            justify-content: space-between; /* Keep space between left/center/right */
            align-items: center;
            box-shadow: 0 2px 4px var(--shadow-color);
            z-index: 10;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            flex-shrink: 0; /* Prevent shrinking */
        }
        
        .header-center {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-grow: 1;
            position: relative;
        }
        
        .mobile-logo {
            display: none; /* Hidden by default, shown only on mobile */
            align-items: center;
            justify-content: center;
        }
        
        .mobile-logo img {
            height: 32px;
            width: auto;
        }
        
        .header-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-shrink: 0; /* Prevent shrinking */
        }
        
        .mobile-header-button {
            display: none; /* Hidden by default, shown only on mobile */
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.2rem;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .mobile-header-button:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .sidebar-toggle {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0.5rem;
            transition: transform 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-on-accent);
        }
        
        .sidebar-toggle:hover {
            transform: scale(1.1);
            color: var(--text-accent);
        }
        
        .chat-info {
            display: flex;
            flex-direction: column;
            align-items: flex-start; /* Align items to the start (left) */
            /* Remove absolute positioning and centering */
            margin-left: 3.5rem; /* Add some space from the sidebar toggle */
            flex-grow: 1; /* Allow it to take available space */
            min-width: 0; /* Allow shrinking if needed */
        }
        
        .chat-title-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .title-actions {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }
        
        .chat-title {
            font-size: 1.25rem;
            font-weight: 500;
            color: var(--text-on-accent);
            margin: 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .chat-model {
            font-size: 0.875rem;
            color: var(--text-on-accent);
            opacity: 0.8;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .title-action-button {
            background-color: var(--bg-accent);
            color: var(--text-on-accent);
            border: none;
            border-radius: 6px;
            padding: 8px 12px;
            margin: 0 4px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
        }
        
        .title-action-button:hover {
            background-color: var(--button-hover);
            transform: scale(1.1);
        }
        
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
            position: relative;
            margin-top: 0; /* Ensure no gap between header and content */
        }
        
        .sidebar {
            width: 280px;
            background-color: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: transform 0.3s ease;
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            z-index: 5; /* Higher z-index to appear above the chat panel */
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .sidebar.sidebar-collapsed {
            transform: translateX(-100%);
        }
        
        .chat-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            margin-left: 280px;
            transition: margin-left 0.3s ease;
            width: calc(100% - 280px);
        }
        
        .chat-panel.sidebar-collapsed {
            margin-left: 0;
            width: 100%;
        }
        
        .sidebar-header {
            display: flex;
            justify-content: flex-end;
            padding: 0.5rem;
        }
        
        .sidebar-toggle {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0.5rem;
            transition: transform 0.2s ease;
        }
        
        .sidebar-toggle:hover {
            transform: scale(1.1);
            color: var(--text-accent);
        }
        
        .sidebar-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--text-accent);
            margin: 0;
        }
        
        .sidebar-actions {
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .new-chat-button, .sidebar-button {
            background-color: var(--bg-accent);
            color: var(--text-on-accent);
            border: none;
            border-radius: 8px;
            width: 100%;
            padding: 10px 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 0; /* Remove gap and use margin on icons instead */
            margin-top: 10px;
            font-size: 14px;
            height: 42px;
        }
        
        /* First button doesn't need top margin */
        .new-chat-button {
            margin-top: 0;
        }
        
        .new-chat-button i, .sidebar-button i {
            font-size: 18px; /* Slightly larger icons */
            width: 30px; /* Wider fixed width for icon container */
            text-align: center;
            display: inline-block; /* Use inline-block instead of flex */
            margin-right: 12px; /* Consistent spacing */
        }
        
        /* Specific adjustments for each icon if needed */
        .new-chat-button i.fa-plus {
             font-size: 18px;
        }
        
        #manage-bots-button i.fa-robot {
            font-size: 18px;
        }
        
        /* Nudge the settings button content to the right */
        .preferences-button {
            padding-left: 25px; /* Increase left padding to move content right */
        }
        
        .preferences-button i.fa-cog {
             font-size: 18px;
            margin-left: 8px; /* Nudge the icon to the right */
        }
        
        .new-chat-button span, .sidebar-button span {
            flex: 1;
            text-align: left;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: 14px; /* Ensure consistent font size */
        }
        
        .new-chat-button:hover, .sidebar-button:hover {
            background-color: var(--button-hover);
            transform: scale(1.05);
        }
        
        .conversation-list {
            flex: 1;
            overflow-y: auto;
            padding: 0.5rem;
        }
        
        .conversation-item {
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .conversation-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .conversation-item.active-conversation {
            background-color: rgba(255, 215, 0, 0.1);
            border-left: 3px solid #ffd700;
        }
        
        .conversation-title {
            font-weight: 500;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .conversation-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.8em;
            color: var(--text-muted);
        }
        
        .conversation-model {
            font-style: italic;
        }
        
        .conversation-date {
            margin-left: 10px;
        }
        
        .chat-container {
            flex-grow: 1;
            overflow-y: auto;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        /* Message Input Container Styling */
        .message-input-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background-color: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            position: relative;
        }
        
        /* Message Input Wrapper - contains textarea and attachment preview */
        .message-input-wrapper {
            position: relative;
            flex-grow: 1;
            display: flex;
            align-items: center;
            background-color: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 24px;
            transition: all 0.3s ease;
            padding: 0 0.5rem 0 0.75rem;
        }
        
        .message-input-wrapper:focus-within {
            border-color: var(--bg-accent);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.25);
        }
        
        /* Textarea styling */
        .message-input-wrapper textarea {
            flex-grow: 1;
            border: none;
            background: transparent;
            padding: 0.75rem 0.5rem;
            color: var(--text-primary);
            font-size: 1rem;
            resize: none;
            max-height: 150px;
            min-height: 24px;
        }
        
        .message-input-wrapper textarea:focus {
            outline: none;
        }
        
        /* File upload button - inside the input wrapper */
        .file-upload-button {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: transparent;
            color: var(--text-secondary);
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            transition: all 0.2s ease;
            padding: 0;
            margin-right: 4px;
        }
        
        .file-upload-button i {
            font-size: 0.85rem;
        }
        
        .file-upload-button:hover {
            color: var(--text-accent);
            background-color: var(--bg-tertiary);
        }
        
        /* Send button styling - now inside the input wrapper */
        .send-button {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--bg-accent);
            color: var(--text-on-accent);
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            transition: all 0.2s ease;
            padding: 0;
            margin-right: 2px;
        }
        
        .send-button i {
            font-size: 0.8rem;
        }
        
        .send-button:hover {
            background-color: var(--button-hover);
            transform: scale(1.05);
        }
        
        /* Hidden file input and upload status */
        .hidden-file-input {
            display: none;
        }
        
        .upload-status-indicator {
            position: absolute;
            bottom: -1.5rem;
            left: 1.5rem;
            font-size: 0.75rem;
            color: var(--text-secondary);
            max-width: 80%;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        /* Attachment preview styling */
        #attachment-preview {
            display: none;
            align-items: center;
            background-color: var(--bg-tertiary);
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            margin-right: 0.5rem;
            max-width: 200px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        #attachment-preview.visible {
            display: flex;
        }
        
        .remove-attachment {
            margin-left: 0.5rem;
            cursor: pointer;
            color: var(--text-secondary);
            font-weight: bold;
        }
        
        .remove-attachment:hover {
            color: var(--text-accent);
        }
        
        /* Mobile adjustments for message input */
        @media (max-width: 768px) {
            .message-input-container {
                padding: 0.75rem 0.75rem;
            }
            
            .message-input-wrapper {
                padding: 0 0.25rem 0 0.5rem;
                border-radius: 20px;
            }
            
            .message-input-wrapper textarea {
                padding: 0.5rem 0.25rem;
                font-size: 0.9rem;
                min-height: 20px;
            }
            
            .file-upload-button, 
            .send-button {
                width: 26px;
                height: 26px;
            }
            
            .file-upload-button i,
            .send-button i {
                font-size: 0.75rem;
            }
            
            .file-upload-button {
                margin-right: 3px;
            }
        }
        
        /* User Message Styling */
        .user-message {
            align-self: flex-end;
            background-color: var(--message-user-bg);
            color: var(--message-user-text);
            border-radius: 1rem 1rem 0 1rem;
            padding: 0.75rem 1rem;
            max-width: 80%;
            box-shadow: 0 1px 2px var(--shadow-color);
        }
        
        .assistant-message {
            align-self: flex-start;
            background-color: var(--message-assistant-bg);
            color: var(--message-assistant-text);
            border-radius: 1rem 1rem 1rem 0;
            padding: 0.75rem 1rem;
            max-width: 80%;
            box-shadow: 0 1px 2px var(--shadow-color);
        }
        
        .system-message {
            align-self: center;
            background-color: var(--message-system-bg);
            color: var(--message-system-text);
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            max-width: 80%;
            text-align: center;
        }
        
        .thinking {
            background-color: var(--thinking-bg);
            padding: 0.5rem 1rem;
            border-left: 3px solid var(--thinking-border);
            border-radius: 0.25rem;
            margin-top: 0.5rem;
            font-size: 0.875rem;
            overflow-x: auto;
        }
        
        details summary {
            display: flex;
            align-items: center;
            cursor: pointer;
            user-select: none;
            padding: 0.5rem 0;
            font-weight: 500;
            color: var(--text-secondary);
        }
        
        details summary::before {
            content: '▶';
            margin-right: 0.5rem;
            transition: transform 0.2s;
            font-size: 0.75rem;
        }
        
        details[open] summary::before {
            transform: rotate(90deg);
        }
        
        .main-response {
            margin-top: 0.75rem;
        }
        
        code {
            background-color: var(--code-bg);
            padding: 0.2rem 0.4rem;
            border-radius: 0.25rem;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
            font-size: 0.875em;
        }
        
        .model-selector {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .model-select {
            background-color: var(--bg-secondary);
            border: 2px solid var(--border-color);
            color: var(--text-primary);
            border-radius: 0.375rem;
            padding: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            min-width: 150px;
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }
        
        .model-select:focus {
            outline: none;
            border-color: var(--bg-accent);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25);
        }
        
        .refresh-button {
            background-color: var(--bg-secondary);
            border: 2px solid var(--border-color);
            color: var(--text-accent);
            border-radius: 0.375rem;
            padding: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out, background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }
        
        .refresh-button:hover {
            background-color: var(--bg-tertiary);
            transform: rotate(180deg);
        }
        
        .theme-toggle-button, .preferences-button {
            background-color: var(--bg-accent);
            color: var(--text-on-accent);
            border: none;
            border-radius: 8px;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0.5rem;
            transition: all 0.2s ease;
        }
        
        .theme-toggle-button:hover, .preferences-button:hover {
            transform: scale(1.1);
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            border-radius: 4px;
            color: white;
            font-weight: 500;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            display: none;
        }
        
        .notification.success {
            background-color: #10b981;
        }
        
        .notification.error {
            background-color: #ef4444;
        }
        
        .notification.info {
            background-color: #3b82f6;
        }
        
        .sidebar-toggle {
            background-color: transparent;
            border: none;
            padding: 0.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .toggle-icon {
            max-width: 280px; /* Match the sidebar width */
            max-height: 60px;
            width: auto;
            height: auto;
            object-fit: contain;
            transition: all 0.3s ease;
        }
        
        /* Modal styling */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            padding: 1.5rem;
            border-radius: 0.5rem;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
        }
        
        .preferences-modal-content {
            max-width: 600px;
        }
        
        .modal h3 {
            margin-top: 0;
            margin-bottom: 1rem;
            font-size: 1.25rem;
        }
        
        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
            margin-top: 1.5rem;
        }
        
        .preferences-tabs {
            display: flex;
            margin-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .tab-button {
            background: none;
            border: none;
            padding: 0.5rem 1rem;
            cursor: pointer;
            opacity: 0.7;
            color: var(--text-primary);
            font-weight: 500;
        }
        
        .tab-button.active {
            opacity: 1;
            border-bottom: 2px solid var(--text-accent);
        }
        
        .preference-group {
            margin-bottom: 1.5rem;
        }
        
        .preference-group label {
            display: block;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }
        
        .preference-select {
            width: 100%;
            padding: 0.5rem;
            border-radius: 0.25rem;
            border: 1px solid var(--border-color);
            background-color: var(--bg-primary);
            color: var(--text-primary);
        }
        
        .preference-description {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }
        
        .checkbox-group {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid var(--border-color);
            padding: 0.5rem;
            border-radius: 0.25rem;
        }
        
        .checkbox-group label {
            display: block;
            padding: 0.25rem 0;
            font-weight: normal;
        }
        
        .radio-group {
            display: flex;
            gap: 1rem;
        }
        
        .radio-group label {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-weight: normal;
        }
        
        .checkbox-option {
            margin-top: 0.5rem;
        }
        
        .checkbox-option label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: normal;
            cursor: pointer;
        }
        
        .checkbox-option input[type="checkbox"] {
            width: 16px;
            height: 16px;
            cursor: pointer;
        }
        
        /* Conversations Modal */
        .conversations-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .conversations-modal-content {
            background-color: var(--bg-primary);
            padding: 25px;
            border-radius: 10px;
            width: 85%;
            max-width: 700px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .conversations-modal h3 {
            color: var(--text-primary);
            margin-bottom: 20px;
            font-size: 1.3rem;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
        }
        
        .all-conversations-list {
            display: grid;
            gap: 12px;
        }
        
        .conversations-modal .conversation-item {
            padding: 15px;
            background-color: var(--bg-secondary);
            border-radius: 8px;
            transition: transform 0.2s, background-color 0.2s;
            color: white;
        }
        
        .conversations-modal .conversation-item:hover {
            background-color: var(--bg-tertiary);
            transform: translateY(-2px);
        }
        
        .conversations-modal .conversation-title {
            font-size: 1rem;
            font-weight: 500;
            margin-bottom: 6px;
            color: white;
        }
        
        .conversations-modal .conversation-meta {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .conversations-modal .conversation-model {
            font-style: italic;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .conversations-modal .conversation-date {
            margin-left: 10px;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .close-modal {
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 28px;
            cursor: pointer;
        }
        
        .more-conversations-button {
            padding: 10px;
            text-align: center;
            cursor: pointer;
            color: var(--text-secondary);
        }
        
        .more-conversations-button:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        /* Empty state styling */
        .empty-message {
            color: var(--text-muted);
            text-align: center;
            padding: 1rem;
            font-size: 0.875rem;
        }
        
        /* Delete Confirmation Modal */
        .danger-button {
            background-color: var(--bg-accent);
            color: var(--text-on-accent);
            border: none;
            border-radius: 6px;
            padding: 10px 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .danger-button:hover {
            background-color: var(--button-hover);
            transform: scale(1.05);
        }
        
        .secondary-button {
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            border: none;
            border-radius: 6px;
            padding: 10px 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .secondary-button:hover {
            background-color: var(--bg-tertiary);
            transform: scale(1.05);
        }
        
        .active-conversation {
            background-color: rgba(255, 215, 0, 0.1);
            border-left: 3px solid #ffd700;
        }
        
        .conversation-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        /* Conversation Buttons */
        .conversation-buttons {
            display: flex;
            gap: 8px;
            margin-top: 8px;
            opacity: 0;
            transition: opacity 0.2s;
        }
        
        .conversation-item:hover .conversation-buttons {
            opacity: 1;
        }
        
        .rename-conversation-button,
        .delete-conversation-button {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 4px;
            font-size: 0.9em;
            border-radius: 4px;
        }
        
        .rename-conversation-button:hover {
            color: var(--text-primary);
            background: rgba(255,255,255,0.1);
        }
        
        .delete-conversation-button:hover {
            color: #ff6b6b;
            background: rgba(255,107,107,0.1);
        }
        
        /* Loading Animation */
        .loading-animation {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 100;
            display: none;
            text-align: center;
        }
        
        .loading-message {
            color: white;
            margin-top: 15px;
            font-size: 1.1rem;
        }
        
        .loading-image {
            width: 80px;
            height: 80px;
            object-fit: contain;
            animation: float 3s ease-in-out infinite;
        }
        
        .loading-pulse {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: rgba(0, 255, 255, 0.2);
            top: 0;
            left: 0;
            animation: pulse 2s infinite;
            z-index: -1;
        }
        
        @keyframes float {
            0% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
            100% { transform: translateY(0); }
        }
        
        @keyframes pulse {
            0% { transform: scale(0.9); opacity: 0.7; }
            70% { transform: scale(1.3); opacity: 0; }
            100% { transform: scale(0.9); opacity: 0; }
        }
        
        /* Chat Card Update Animation */
        .conversation-item.updated {
            animation: bump 0.5s ease;
        }
        
        @keyframes bump {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }

        /* Message Action Buttons Styling */
        .user-message, .assistant-message {
            position: relative; /* Needed for absolute positioning of actions */
            overflow: visible; /* Ensure buttons aren't clipped */
        }

        .message-actions {
            position: absolute;
            bottom: -30px; /* Position below the message bubble */
            right: 8px;  /* Position near the right */
            display: flex;
            gap: 4px;
            background-color: var(--bg-secondary); /* Use theme background */
            padding: 4px 8px;
            border-radius: 15px; /* Pill shape */
            box-shadow: 0 1px 3px var(--shadow-color);
            opacity: 0; /* Hidden by default */
            transition: opacity 0.2s ease-in-out;
            z-index: 5; /* Ensure buttons are above message content */
        }

        /* Show message actions on hover */
        .user-message:hover .message-actions,
        .assistant-message:hover .message-actions {
            opacity: 1; /* Show on hover */
        }

        .message-actions button {
            background: none;
            border: none;
            color: var(--text-muted); /* Use muted text color */
            cursor: pointer;
            padding: 2px;
            font-size: 0.8em; /* Smaller icons */
            line-height: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .message-actions button:hover {
            color: var(--text-primary); /* Darker color on hover */
        }

        .message-actions button .fa-check {
             color: #22c55e; /* Green check for copy success */
        }

        /* Notification Styling */
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-20px); /* Start hidden above */
            padding: 10px 20px;
            border-radius: 6px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 1001; /* Above modals */
            font-size: 0.9rem;
            font-weight: 500;
            opacity: 0;
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            color: #fff; /* Default text color */
        }

        .notification-info {
            background-color: #3b82f6; /* Blue */
        }

        .notification-success {
            background-color: #22c55e; /* Green */
        }

        .notification-error {
            background-color: #ef4444; /* Red */
        }
        
        .file-upload-button {
            background-color: var(--bg-accent);
            color: var(--text-on-accent);
            border: none;
            border-radius: 6px;
            padding: 10px 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .file-upload-button:hover {
            background-color: var(--button-hover);
            transform: scale(1.05);
        }
        
        .hidden-file-input {
            display: none;
        }
        
        .upload-status-indicator {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* Attachment Preview Styles */
        #attachment-preview {
            display: none; /* Hidden by default */
            background-color: var(--bg-secondary);
            border-radius: 4px;
            font-size: 0.85em;
            padding: 2px 6px;
            margin: 0 5px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            max-width: 150px; /* Limit width to prevent overflow */
        }

        #attachment-preview span {
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            margin-right: 5px;
        }

        .remove-attachment {
            cursor: pointer;
            font-weight: bold;
            color: var(--text-error);
            font-size: 1.2em;
            line-height: 1;
        }

        .remove-attachment:hover {
            color: darkred;
        }
        
        .message-input-wrapper {
            display: flex;
            align-items: center;
            flex-grow: 1;
            background-color: var(--bg-primary);
            border-radius: 6px;
            border: 1px solid var(--border-color);
            padding: 0 8px;
        }

        .message-input-wrapper textarea {
            padding: 0.75rem 1rem;
            border: none;
            border-radius: 6px;
            background-color: transparent;
            color: var(--text-primary);
            font-size: 1rem;
            transition: border-color 0.3s ease;
            width: 100%;
        }
        
        .message-input-wrapper textarea:focus {
            outline: none;
            border-color: var(--bg-accent);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25);
        }
        
        /* Message Attachment Styles */
        .message-attachment {
            background-color: var(--bg-secondary);
            padding: 5px 10px;
            margin-top: 8px;
            border-radius: 4px;
            font-size: 0.85em;
            color: var(--text-secondary);
            display: block; /* Changed to block for better positioning */
            max-width: 100%; /* Allow it to take full width of its container */
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }
        
        /* Adjust attachment style for user messages */
        .user-message .message-attachment {
            background-color: rgba(255, 255, 255, 0.2);
            color: var(--message-user-text);
            margin-left: auto; /* Auto margin on left for right alignment */
            margin-right: 0;
            max-width: 80%; /* Limit width for better appearance */
        }
        
        .message-content {
            white-space: pre-wrap; /* Ensures line breaks are respected */
        }
        
        /* Loading animation for preferences modal */
        .preferences-loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            text-align: center;
        }
        
        .preferences-loading img {
            width: 80px;
            height: auto; /* Changed from fixed height to auto to maintain aspect ratio */
            animation: float 2s ease-in-out infinite;
        }
        
        .preferences-loading p {
            margin-top: 1rem;
            color: var(--text-secondary);
            font-size: 1rem;
        }
        
        @keyframes float {
            0% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
            100% {
                transform: translateY(0px);
            }
        }
        
        .preferences-loading .error-message {
            color: #e53e3e;
            margin-bottom: 1rem;
        }
        
        .preferences-loading .retry-button {
            background-color: var(--bg-accent);
            color: var(--text-on-accent);
            border: none;
            border-radius: 4px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .preferences-loading .retry-button:hover {
            background-color: var(--button-hover);
            transform: scale(1.05);
        }
        
        /* Bot Management Modal */
        #bot-management-modal .modal-content {
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }
        
        #bot-management-modal .modal-header {
            border-bottom: 1px solid var(--border-color);
            border-radius: 12px 12px 0 0;
            padding: 10px 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        #bot-management-modal .header-left {
            display: flex;
            align-items: center;
        }
        
        #bot-management-modal .header-right {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        #bot-management-modal .modal-header h2 {
            color: var(--text-primary);
            margin: 0;
            font-size: 1.3rem;
            font-weight: 500;
        }
        
        #bot-management-modal .close-button {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.2s;
            margin-left: 10px;
        }
        
        #bot-management-modal .modal-body {
            max-height: calc(90vh - 120px);
            overflow-y: auto;
            padding: 20px;
        }
        
        #bot-management-modal .bot-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 400px;
            overflow-y: auto;
            margin: 15px 0;
            padding-right: 10px;
        }
        
        #bot-management-modal .bot-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--bg-secondary);
            border-radius: 8px;
            padding: 12px 15px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid var(--border-color);
        }
        
        #bot-management-modal .bot-item:hover {
            background-color: var(--bg-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        #bot-management-modal .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        
        #bot-management-modal .section-header h3 {
            margin: 0;
            color: var(--text-primary);
            font-size: 1.2rem;
        }
        
        #bot-management-modal .form-group {
            margin-bottom: 15px;
            width: 100%;
        }
        
        #bot-management-modal .form-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: var(--text-primary);
        }
        
        #bot-management-modal .form-group input[type="text"],
        #bot-management-modal .form-group select,
        #bot-management-modal .form-group textarea {
            width: 100%;
            box-sizing: border-box;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 0.95rem;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        
        #bot-management-modal .form-group input[type="text"]:focus,
        #bot-management-modal .form-group select:focus,
        #bot-management-modal .form-group textarea:focus {
            border-color: var(--bg-accent);
            outline: none;
            box-shadow: 0 0 0 2px rgba(var(--accent-rgb), 0.2);
        }
        
        #bot-management-modal .knowledge-files-list {
            display: flex;
            flex-direction: column;
            gap: 5px;
            max-height: 120px;
            overflow-y: auto;
            padding: 10px;
            background-color: var(--bg-secondary);
            border-radius: 8px;
            width: 100%;
            box-sizing: border-box;
            border: 1px solid var(--border-color);
        }
        
        #bot-management-modal .parameters-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 15px;
            background-color: var(--bg-secondary);
            border-radius: 8px;
            width: 100%;
            box-sizing: border-box;
            border: 1px solid var(--border-color);
        }
        
        #bot-management-modal .primary-button, #bot-management-modal .secondary-button {
            padding: 10px 16px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
        }
        
        #bot-management-modal .primary-button {
            background-color: var(--bg-accent);
            color: var(--text-on-accent);
        }
        
        #bot-management-modal .primary-button:hover {
            background-color: var(--button-hover);
            transform: translateY(-1px);
        }
        
        #bot-management-modal .secondary-button {
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }
        
        #bot-management-modal .secondary-button:hover {
            background-color: var(--bg-hover);
            transform: translateY(-1px);
        }
        
        #bot-management-modal .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
            color: var(--text-secondary);
            text-align: center;
            background-color: var(--bg-secondary);
            border-radius: 8px;
            border: 1px dashed var(--border-color);
        }
        
        #bot-management-modal .bot-info {
            flex: 1;
        }
        
        #bot-management-modal .bot-name {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }
        
        #bot-management-modal .bot-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        #bot-management-modal .bot-model {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 5px;
        }
        
        #bot-management-modal .bot-actions {
            display: flex;
            gap: 8px;
        }
        
        #bot-management-modal .bot-actions button {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: all 0.2s ease;
        }
        
        #bot-management-modal .bot-actions button:hover {
            background-color: var(--bg-accent);
            color: var(--text-on-accent);
        }
        
        #bot-management-modal .bot-form-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            width: 100%;
            max-width: 100%;
        }
        
        #bot-management-modal .bot-form-column {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
            max-width: 100%;
        }
        
        #bot-management-modal .form-group textarea {
            resize: vertical;
            min-height: 60px;
        }
        
        #bot-management-modal #bot-system-prompt {
            min-height: 100px;
        }
        
        #bot-management-modal .knowledge-base-selector {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        #bot-management-modal .file-upload-container {
            display: flex;
            align-items: center;
            gap: 10px;
            width: 100%;
            box-sizing: border-box;
        }
        
        #bot-management-modal .file-upload-container input[type="file"] {
            display: none;
        }
        
        #bot-management-modal .knowledge-file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 10px;
            background-color: var(--bg-primary);
            border-radius: 4px;
            width: 100%;
            box-sizing: border-box;
        }
        
        #bot-management-modal .knowledge-file-name {
            font-size: 0.9rem;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-width: 80%;
        }
        
        #bot-management-modal .knowledge-file-remove {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 2px 5px;
            border-radius: 4px;
        }
        
        #bot-management-modal .knowledge-file-remove:hover {
            color: #e53e3e;
        }
        
        #bot-management-modal .parameter-row {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        #bot-management-modal .parameter-row label {
            min-width: 100px;
            margin: 0;
        }
        
        #bot-management-modal .parameter-row input[type="range"] {
            flex: 1;
        }
        
        #bot-management-modal .parameter-row span {
            min-width: 40px;
            text-align: right;
        }
        
        #bot-management-modal .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
            grid-column: span 2;
        }
        
        #bot-management-modal .error-state {
            text-align: center;
            padding: 30px;
            color: var(--text-secondary);
        }
        
        #bot-management-modal .retry-button {
            margin-top: 10px;
            background-color: var(--bg-accent);
            color: var(--text-on-accent);
            border: none;
            border-radius: 4px;
            padding: 8px 16px;
            cursor: pointer;
        }
        
        #bot-management-modal .loading-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px;
        }
        
        #bot-management-modal .loading-container img {
            width: 60px;
            height: auto;
            animation: float 2s ease-in-out infinite;
        }
        
        #bot-management-modal .loading-container p {
            margin-top: 15px;
            color: var(--text-secondary);
        }
        
        /* Tooltip Styles */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
            max-width: 250px;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            text-align: center;
            border-radius: 6px;
            padding: 8px 12px;
            opacity: 0;
            transition: opacity 0.3s, visibility 0.3s;
            width: 250px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            font-size: 0.85rem;
            line-height: 1.4;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .parameter-row .tooltip label {
            margin-right: 8px;
            cursor: help;
        }
        
        /* Add positioning classes for different tooltip placements */
        .tooltip-right .tooltip-text {
            left: 0;
            transform: translateX(0);
        }
        
        .form-group .tooltip {
            display: block;
            max-width: 100%;
        }
        
        .sidebar-button.secret-active {
            background-color: #222a3a !important;
            color: #ffd700 !important;
            border: 2px solid #ffd700 !important;
            box-shadow: 0 0 8px #ffd70044;
            transform: scale(1.05);
        }
        
        /* Fading into ashes animation */
        @keyframes fadeToAshes {
            0% {
                opacity: 1;
                filter: grayscale(0%) blur(0px);
                transform: scale(1) translateY(0);
            }
            60% {
                opacity: 0.6;
                filter: grayscale(80%) blur(1px);
                transform: scale(0.98) translateY(-6px);
            }
            80% {
                opacity: 0.2;
                filter: grayscale(100%) blur(3px);
                transform: scale(0.96) translateY(-12px);
            }
            100% {
                opacity: 0;
                filter: grayscale(100%) blur(6px);
                transform: scale(0.95) translateY(-20px);
            }
        }
        .fade-to-ashes {
            animation: fadeToAshes 1.1s forwards;
        }
        
        .landing-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem 1rem;
            text-align: center;
            height: 100%;
            overflow-y: auto;
        }
        
        .landing-page h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            text-align: center;
            color: var(--text-accent);
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            letter-spacing: 1px;
        }
        
        .landing-page p {
            font-size: 1.1rem;
            margin-bottom: 2rem;
            color: var(--text-secondary);
            max-width: 600px;
        }
        
        .prompt-suggestions-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin-top: 1.5rem;
            overflow: visible;
            padding: 0 50px;
        }
        
        .prompt-suggestions-container::before,
        .prompt-suggestions-container::after {
            content: '';
            position: absolute;
            top: 0;
            width: 60px;
            height: 100%;
            z-index: 5;
            pointer-events: none;
        }
        
        .prompt-suggestions-container::before {
            left: 50px;
            background: linear-gradient(to right, var(--bg-primary) 0%, transparent 100%);
        }
        
        .prompt-suggestions-container::after {
            right: 50px;
            background: linear-gradient(to left, var(--bg-primary) 0%, transparent 100%);
        }
        
        .prompt-suggestions {
            display: flex;
            flex-direction: row;
            gap: 1rem;
            width: 100%;
            overflow-x: auto;
            scroll-behavior: smooth;
            padding: 1rem 0;
            scrollbar-width: none; /* Hide scrollbar for Firefox */
            -ms-overflow-style: none; /* Hide scrollbar for IE and Edge */
            scroll-snap-type: x mandatory;
        }
        
        /* Hide scrollbar for Chrome, Safari and Opera */
        .prompt-suggestions::-webkit-scrollbar {
            display: none;
        }
        
        .prompt-card {
            background-color: var(--bg-secondary);
            border-radius: 8px;
            padding: 1rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            border: 1px solid var(--border-color);
            min-width: 250px;
            max-width: 300px;
            flex: 0 0 auto;
            scroll-snap-align: start;
        }
        
        .prompt-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-color: var(--text-accent);
        }
        
        .prompt-card h3 {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }
        
        .prompt-card p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 0;
        }
        
        .prompt-model {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
            font-style: italic;
        }
        
        .landing-logo {
            width: auto;
            height: 120px;
            margin-bottom: 1.5rem;
            animation: pulse 3s infinite alternate;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.05); }
        }
        
        .carousel-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: var(--bg-accent);
            color: var(--text-on-accent);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            opacity: 0.8;
            transition: opacity 0.2s, transform 0.2s;
        }
        
        .carousel-button:hover {
            opacity: 1;
            transform: translateY(-50%) scale(1.1);
        }
        
        .carousel-button.prev {
            left: 0;
        }
        
        .carousel-button.next {
            right: 0;
        }
        
        .carousel-button i {
            font-size: 1.2rem;
        }
        
        /* User Auth Modal and Menu */
        .user-menu { 
            position: fixed; 
            left: 0.5rem; 
            bottom: 0.5rem; 
            z-index: 1100; 
            display: flex; 
            align-items: center; 
            gap: 1.2em; 
            background: var(--bg-secondary, #f0f0f0); 
            padding: 0.7em 1.2em; 
            border-radius: 10px; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.15); 
            font-size: 1.05em;
            transition: transform 0.3s ease;
        }
        [data-theme="dark"] .user-menu {
            background: var(--bg-secondary, #2a2a2a);
        }
        .user-menu:hover {
            transform: translateY(-5px);
        }
        #user-info {
            font-weight: 500;
        }
        #logout-btn { 
            background: var(--bg-accent, #555); 
            color: #1a1a1a; 
            border: none; 
            border-radius: 6px; 
            padding: 0.4em 0.9em; 
            cursor: pointer;
            transition: all 0.2s ease;
        }
        #logout-btn:hover { 
            background: var(--button-hover, #333);
            transform: translateY(-2px);
        }
        
        /* Modern Auth Modal Styles */
        .modal-overlay {
            position: fixed; 
            left: 0; 
            top: 0; 
            width: 100vw; 
            height: 100vh;
            background: rgba(0,0,0,0.6); 
            z-index: 1000;
            backdrop-filter: blur(8px);
        }
        .modal {
            display: flex;
            justify-content: center;
            align-items: center;
            position: fixed; 
            left: 50%; 
            top: 50%; 
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(12px);
            padding: 0;
            border-radius: 16px; 
            z-index: 1001; 
            min-width: 360px;
            max-width: 90vw;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            overflow: hidden;
            color: var(--text-primary);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        [data-theme="dark"] .modal {
            background: rgba(0, 0, 0, 0.2);
            color: var(--text-primary, #ffffff);
            box-shadow: 0 15px 40px rgba(0,0,0,0.5);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .modal-content { 
            display: flex; 
            flex-direction: column; 
            align-items: stretch;
            width: 100%;
        }
        .auth-header {
            background: var(--bg-accent, #555);
            color: var(--text-on-accent, #fff);
            padding: 1.5rem;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 1rem;
        }
        .auth-logo {
            width: 60px;
            height: 60px;
            margin-bottom: 0.5rem;
            animation: pulse 2s infinite;
        }
        .auth-header h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            margin: 0;
        }
        .version-number {
            font-size: 1.2rem;
            vertical-align: super;
            color: var(--text-on-accent, #fff);
            opacity: 0.8;
        }
        .close-modal { 
            position: absolute; 
            right: 1rem; 
            top: 1rem; 
            background: none; 
            border: none; 
            font-size: 1.5rem; 
            cursor: pointer;
            color: var(--text-on-accent, #fff);
            z-index: 10;
        }
        #auth-tabs {
            display: flex;
            padding: 0 1.5rem;
            margin-bottom: 1rem;
        }
        .auth-tab { 
            background: none; 
            border: none; 
            font-size: 1.1rem; 
            padding: 0.5rem 1rem;
            margin-right: 1rem; 
            cursor: pointer; 
            color: var(--text-primary, #333);
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
        }
        .auth-tab.active { 
            font-weight: bold; 
            border-bottom: 2px solid var(--bg-accent, #555);
            color: var(--text-accent, #333);
        }
        .auth-form { 
            display: flex; 
            flex-direction: column; 
            gap: 1.2rem; 
            margin: 0.5rem 0;
            padding: 0 1.5rem 1.5rem;
        }
        .input-group {
            position: relative;
            display: flex;
            align-items: center;
        }
        .input-icon {
            position: absolute;
            left: 1rem;
            color: var(--text-muted, #6b7280);
        }
        .auth-form input { 
            padding: 0.8rem 1rem 0.8rem 2.5rem; 
            border-radius: 8px; 
            border: 1px solid var(--border-color, #ccc); 
            background: var(--bg-primary, #fff); 
            color: var(--text-primary);
            font-size: 1rem;
            width: 100%;
            transition: all 0.2s ease;
        }
        .auth-form input:focus {
            outline: none;
            border-color: var(--bg-accent, #555);
            box-shadow: 0 0 0 2px rgba(85,85,85,0.2);
        }
        .auth-submit-btn { 
            padding: 0.8rem 1rem; 
            border-radius: 8px; 
            background: var(--bg-accent, #555); 
            color: var(--text-on-accent, #fff); 
            border: none; 
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.2s ease;
            margin-top: 0.5rem;
        }
        .auth-submit-btn:hover { 
            background: var(--button-hover, #333);
            transform: translateY(-2px);
        }
        .auth-error { 
            color: #e53e3e; 
            font-size: 0.9rem; 
            min-height: 1.2rem;
            text-align: center;
        }
        
        /* Remember Me Checkbox Styling */
        .remember-me-container {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
            padding-left: 0.5rem;
            white-space: nowrap;
        }
        
        .styled-checkbox {
            width: 16px;
            height: 16px;
            margin-right: 0.5rem;
            cursor: pointer;
            accent-color: var(--bg-accent);
            vertical-align: middle;
        }
        
        .remember-me-container label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: normal;
        }
        
        .remember-me-container input[type="checkbox"] {
            width: 16px;
            height: 16px;
            cursor: pointer;
        }
        
        /* User Profile Update Status */
        .update-status {
            margin-top: 1rem;
            padding: 0.75rem;
            border-radius: 6px;
            font-size: 0.9rem;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .update-status.success {
            background-color: rgba(16, 185, 129, 0.2);
            color: #10b981;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        
        .update-status.error {
            background-color: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        
        .preference-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 0.95rem;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        
        .preference-input:focus {
            border-color: var(--bg-accent);
            outline: none;
            box-shadow: 0 0 0 2px rgba(var(--accent-rgb), 0.2);
        }
        
        /* User Management Styles */
        .user-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            background-color: var(--bg-secondary);
            border-radius: 6px;
            overflow: hidden;
        }
        
        .user-table th, .user-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        .user-table th {
            background-color: var(--bg-tertiary);
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .user-table tr:last-child td {
            border-bottom: none;
        }
        
        .user-table tr:hover {
            background-color: var(--bg-tertiary);
        }
        
        .user-role-select {
            padding: 0.5rem;
            border-radius: 4px;
            border: 1px solid var(--border-color);
            background-color: var(--bg-secondary);
            color: var(--text-primary);
        }
        
        .user-action-button {
            padding: 0.4rem 0.6rem;
            border-radius: 4px;
            border: none;
            background-color: var(--bg-accent);
            color: var(--text-on-accent);
            cursor: pointer;
            margin-right: 0.5rem;
            font-size: 0.8rem;
        }
        
        .user-action-button:hover {
            background-color: var(--button-hover);
        }
        
        .user-action-button.delete {
            background-color: #ef4444;
        }
        
        .user-action-button.delete:hover {
            background-color: #dc2626;
        }
        
        .centered-loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }
        
        .centered-loading img {
            width: 60px;
            height: auto;
            animation: float 2s ease-in-out infinite;
        }
        
        .centered-loading p {
            margin-top: 1rem;
            color: var(--text-secondary);
        }
        
        .error-message {
            color: #e53e3e;
            padding: 0.75rem;
            border-radius: 6px;
            background-color: rgba(239, 68, 68, 0.1);
            margin-top: 1rem;
            text-align: center;
        }
        
        /* Inline password form styles */
        .inline-password-form {
            padding: 1rem;
            margin: 0.5rem 0;
            background-color: var(--bg-secondary);
            border-radius: 4px;
            border-left: 3px solid var(--bg-accent);
            animation: fadeIn 0.3s ease;
        }
        
        .form-row {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .form-row input {
            flex: 1;
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: var(--bg-primary);
            color: var(--text-primary);
        }
        
        .pwd-status {
            font-size: 0.85rem;
            padding: 0.25rem 0;
        }
        
        .pwd-status.success {
            color: #4caf50;
        }
        
        .pwd-status.error {
            color: #d32f2f;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            /* General layout adjustments */
            .app-container {
                overflow-x: hidden;
            }
            
            /* Header adjustments for mobile app-like experience */
            .header {
                padding: 0.5rem;
                height: 56px;
                position: relative;
            }
            
            /* Hide desktop elements on mobile */
            .chat-info {
                display: none;
            }
            
            /* Show mobile elements */
            .mobile-logo {
                display: flex;
                position: absolute;
                left: 50%;
                top: 50%;
                transform: translate(-50%, -50%);
            }
            
            .mobile-header-button {
                display: flex;
            }
            
            /* Sidebar toggle styling */
            .sidebar-toggle {
                font-size: 1.3rem;
                padding: 0.5rem;
                width: 36px;
                height: 36px;
                border-radius: 50%;
            }
            
            .sidebar-toggle:hover {
                background-color: rgba(255, 255, 255, 0.1);
            }
            
            /* Sidebar adjustments */
            .sidebar {
                width: 100%;
                max-width: 100%;
                transform: translateX(-100%);
                z-index: 30;
            }
            
            .sidebar.sidebar-collapsed {
                transform: translateX(-100%);
            }
            
            .sidebar:not(.sidebar-collapsed) {
                transform: translateX(0);
            }
            
            /* Message input adjustments */
            .message-input-container {
                padding: 0.5rem;
                flex-wrap: nowrap;
                gap: 0.3rem;
            }
            
            .message-input {
                padding: 0.5rem;
                min-height: 40px;
                max-height: 100px;
            }
            
            /* Ensure send button is always visible */
            .send-button {
                min-width: 40px;
                height: 40px;
                padding: 0;
                flex-shrink: 0;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            /* Hide text, show only icon on mobile */
            .send-button span {
                display: none;
            }
            
            .send-button i {
                margin: 0;
                font-size: 1rem;
            }
            
            .file-upload-button {
                min-width: 40px;
                height: 40px;
                padding: 0;
                flex-shrink: 0;
            }
            
            /* User menu adjustments */
            .user-menu {
                position: absolute;
                top: 45px;
                right: 5px;
                z-index: 30;
                box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            }
            
            /* Auth modal adjustments */
            .modal-content {
                width: 95%;
                max-width: 350px;
                padding: 1rem;
            }
            
            .auth-header h1 {
                font-size: 1.5rem;
            }
            
            .auth-logo {
                height: 40px;
            }
            
            /* Password strength checker adjustments */
            .input-group {
                position: relative;
            }
            
            #password-info-icon {
                position: absolute;
                right: 0.5rem;
                top: 0.5rem;
                z-index: 5;
            }
            
            #password-tooltip {
                width: 220px;
                right: 0;
                top: 2.5rem;
            }
            
            /* Progress bar adjustments */
            #strength-label {
                min-width: 70px;
                font-size: 0.75rem;
            }
            
            /* Landing page carousel adjustments */
            .landing-page {
                padding: 1.5rem 0.5rem;
            }
            
            .landing-page h1 {
                font-size: 1.8rem;
                margin-bottom: 0.75rem;
            }
            
            .landing-page p {
                font-size: 0.95rem;
                margin-bottom: 1.5rem;
                padding: 0 0.5rem;
            }
            
            .landing-logo {
                height: 80px;
                margin-bottom: 1rem;
            }
            
            .prompt-suggestions-container {
                padding: 0 40px;
            }
            
            .prompt-suggestions-container::before {
                left: 40px;
                width: 30px;
            }
            
            .prompt-suggestions-container::after {
                right: 40px;
                width: 30px;
            }
            
            .carousel-button {
                width: 32px;
                height: 32px;
            }
            
            .carousel-button i {
                font-size: 0.9rem;
            }
            
            .prompt-card {
                min-width: 220px;
                padding: 0.75rem;
            }
            
            .prompt-card h3 {
                font-size: 1rem;
                margin-bottom: 0.3rem;
            }
            
            .prompt-card p {
                font-size: 0.8rem;
            }
        }
        
        /* Small mobile devices */
        @media (max-width: 480px) {
            /* Further adjustments for very small screens */
            .header-controls {
                gap: 0.5rem;
            }
            
            .title-action-button {
                width: 28px;
                height: 28px;
                padding: 6px;
            }
            
            .chat-info {
                max-width: 120px;
            }
            
            /* Auth modal further adjustments */
            .modal-content {
                width: 95%;
                max-width: 300px;
            }
            
            .auth-tab {
                padding: 0.5rem;
                font-size: 0.9rem;
            }
            
            /* Password strength checker further adjustments */
            #strength-label {
                min-width: 60px;
                font-size: 0.7rem;
            }
            
            #strength-requirements {
                font-size: 0.7rem;
            }
            
            /* Landing page carousel further adjustments */
            .landing-page h1 {
                font-size: 1.5rem;
            }
            
            .landing-page p {
                font-size: 0.85rem;
                padding: 0 0.25rem;
            }
            
            .landing-logo {
                height: 60px;
            }
            
            .prompt-suggestions-container {
                padding: 0 30px;
            }
            
            .prompt-suggestions-container::before,
            .prompt-suggestions-container::after {
                width: 20px;
            }
            
            .prompt-suggestions-container::before {
                left: 30px;
            }
            
            .prompt-suggestions-container::after {
                right: 30px;
            }
            
            .carousel-button {
                width: 28px;
                height: 28px;
            }
            
            .carousel-button i {
                font-size: 0.8rem;
            }
            
            .prompt-card {
                min-width: 180px;
                padding: 0.6rem;
            }
            
            .prompt-card h3 {
                font-size: 0.9rem;
                margin-bottom: 0.2rem;
            }
            
            .prompt-card p {
                font-size: 0.75rem;
                line-height: 1.3;
            }
            
            .prompt-model {
                font-size: 0.7rem;
                margin-top: 0.3rem;
            }
        }
        
        /* Messages Modal Styles */
        .messages-modal-content {
            width: 90%;
            max-width: 400px;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            padding: 0;
            border-radius: 12px;
            overflow: hidden;
        }
        
        .messages-modal-content .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background-color: var(--bg-accent);
            color: var(--text-on-accent);
        }
        
        .messages-modal-content .modal-header h3 {
            margin: 0;
            font-size: 1.2rem;
        }
        
        .messages-modal-content .close-modal {
            background: none;
            border: none;
            color: var(--text-on-accent);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
            line-height: 1;
        }
        
        .messages-modal-content .modal-body {
            flex: 1;
            overflow-y: auto;
            padding: 0;
        }
        
        .messages-search {
            padding: 0.75rem;
            position: relative;
            border-bottom: 1px solid var(--border-color);
        }
        
        .messages-search input {
            width: 100%;
            padding: 0.5rem 2rem 0.5rem 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--bg-primary);
            color: var(--text-primary);
        }
        
        .messages-search i {
            position: absolute;
            right: 1.25rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
        }
        
        .messages-list {
            padding: 0.5rem 0;
        }
        
        .messages-list .conversation-item {
            cursor: pointer;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s;
        }
        
        .messages-list .conversation-item:last-child {
            border-bottom: none;
        }
        
        .messages-list .conversation-item:hover {
            background-color: var(--bg-secondary);
        }
        
        .messages-list .conversation-item.active-conversation {
            background-color: rgba(255, 215, 0, 0.1);
            border-left: 3px solid var(--bg-accent);
        }
        
        /* Mobile modal overlay */
        .mobile-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(4px);
        }
        
        /* Sidebar User Section */
        .sidebar-user-section {
            margin-top: auto;
            border-top: 1px solid var(--border-color);
            padding: 0.75rem;
            background-color: var(--bg-secondary);
        }
        
        .sidebar-user-info {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
        }
        
        .user-avatar {
            font-size: 1.5rem;
            margin-right: 0.75rem;
            color: var(--text-secondary);
        }
        
        .user-details {
            flex: 1;
            overflow: hidden;
        }
        
        .user-details span {
            display: block;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: 0.9rem;
        }
        
        #sidebar-logout-btn {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem;
            background-color: var(--bg-accent);
            color: var(--text-on-accent);
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
        }
        
        #sidebar-logout-btn:hover {
            background-color: var(--button-hover);
            transform: scale(1.05);
        }
        
        #sidebar-logout-btn i {
            margin-right: 0.5rem;
        }
        
        /* Mobile chat title styles */
        .mobile-chat-info {
            display: none;
        }
        
        .mobile-chat-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 60vw;
            margin: 0 auto 0.25rem auto;
            padding: 0 8px;
        }
        
        .mobile-chat-model {
            font-size: 0.9rem;
            font-weight: 400;
            color: var(--text-secondary);
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 60vw;
            margin: 0 auto 0.5rem auto;
            padding: 0 8px;
        }
        
        @media (max-width: 768px) {
            .header-center {
                flex-direction: column !important;
                align-items: center !important;
                justify-content: center !important;
            }
            
            .mobile-chat-info {
                display: flex;
                flex-direction: column;
                align-items: center;
                width: 100%;
            }
            
            .mobile-chat-title,
            .mobile-chat-model {
                width: 100%;
                max-width: 90vw;
                text-align: center;
            }
            
            .mobile-chat-title {
                margin-bottom: 0.1rem;
            }
            
            .chat-info {
                display: none !important;
            }
        }
/* Add this to ensure mobile chat title is hidden on desktop */
@media (min-width: 769px) {
    .mobile-chat-info {
        display: none !important;
    }
    
    .mobile-chat-title,
    .mobile-chat-model {
        display: none !important;
    }
}

        /* Ensure correct theme colors for mobile header and sidebar toggle buttons */
        .mobile-header-button, #mobile-messages-button, #toggle-sidebar-btn {
            background: var(--background-secondary);
            color: var(--text-primary);
            border: none;
            outline: none;
            border-radius: 50%;
            padding: 0.5rem;
            transition: background 0.2s, color 0.2s;
        }
        [data-theme="dark"] .mobile-header-button,
        [data-theme="dark"] #mobile-messages-button,
        [data-theme="dark"] #toggle-sidebar-btn {
            background: var(--background-secondary-dark, #222);
            color: var(--text-primary-dark, #fff);
        }
        .mobile-header-button:hover, #mobile-messages-button:hover, #toggle-sidebar-btn:hover {
            background: var(--background-tertiary, #e0e0e0);
        }
        [data-theme="dark"] .mobile-header-button:hover,
        [data-theme="dark"] #mobile-messages-button:hover,
        [data-theme="dark"] #toggle-sidebar-btn:hover {
            background: var(--background-tertiary-dark, #333);
        }
        
        /* Message Modal Styling */
        #message-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            min-width: 320px;
            max-width: 90vw;
            min-height: 180px;
            max-height: 80vh;
            background: var(--background-primary, #fff);
            color: var(--text-primary);
            border-radius: 1rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.18), 0 1.5px 6px rgba(0,0,0,0.12);
            z-index: 1200;
            padding: 2rem 1.5rem 1.5rem 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: stretch;
            gap: 1rem;
            transition: box-shadow 0.2s, background 0.2s;
        }
        [data-theme="dark"] #message-modal {
            background: var(--background-primary-dark, #181818);
            color: var(--text-primary-dark, #fff);
            box-shadow: 0 8px 32px rgba(0,0,0,0.38), 0 1.5px 6px rgba(0,0,0,0.24);
        }
        #message-modal .modal-header {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            text-align: center;
        }
        #message-modal .modal-content {
            flex: 1 1 auto;
            overflow-y: auto;
            margin-bottom: 1rem;
        }
        #message-modal .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }
        /* Modal overlay/backdrop */
        #message-modal-backdrop {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.32);
            z-index: 1199;
        }
        
        /* Conversation Modal Styling */
        #conversation-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            min-width: 320px;
            max-width: 90vw;
            min-height: 180px;
            max-height: 80vh;
            background: var(--background-primary, #fff);
            color: var(--text-primary);
            border-radius: 1rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.18), 0 1.5px 6px rgba(0,0,0,0.12);
            z-index: 1200;
            padding: 2rem 1.5rem 1.5rem 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: stretch;
            gap: 1rem;
            transition: box-shadow 0.2s, background 0.2s;
        }
        [data-theme="dark"] #conversation-modal {
            background: var(--background-primary-dark, #181818);
            color: var(--text-primary-dark, #fff);
            box-shadow: 0 8px 32px rgba(0,0,0,0.38), 0 1.5px 6px rgba(0,0,0,0.24);
        }
        #conversation-modal .modal-header {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            text-align: center;
        }
        #conversation-modal .modal-content {
            flex: 1 1 auto;
            overflow-y: auto;
            margin-bottom: 1rem;
        }
        #conversation-modal .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }
        /* Modal overlay/backdrop */
        #conversation-modal-backdrop {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.32);
            z-index: 1199;
        }
        
        /* Sidebar model selector styling */
        .sidebar-model-selector {
            display: none; /* Hidden by default, shown only on mobile */
            margin: 0.5rem 0 1.5rem 0;
            padding: 0 1rem;
            width: 100%;
        }
        
        .sidebar-model-select-container {
            display: flex;
            align-items: center;
            width: 100%;
            background: var(--background-secondary);
            border-radius: 0.5rem;
            overflow: hidden;
            border: 1px solid var(--border-color, #e0e0e0);
        }
        
        .sidebar-model-select {
            flex: 1;
            padding: 0.7rem 1rem;
            font-size: 0.95rem;
            background: transparent;
            border: none;
            color: var(--text-primary);
            outline: none;
            cursor: pointer;
            width: 100%;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.7rem center;
            background-size: 1em;
            padding-right: 2.5rem;
        }
        
        .sidebar-refresh-button {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            padding: 0.5rem 0.8rem;
            cursor: pointer;
            transition: color 0.2s;
        }
        
        .sidebar-refresh-button:hover {
            color: var(--accent-color);
        }
        
        [data-theme="dark"] .sidebar-model-select-container {
            background: var(--background-secondary-dark, #222);
            border-color: var(--border-color-dark, #444);
        }
        
        [data-theme="dark"] .sidebar-model-select {
            color: var(--text-primary-dark, #fff);
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
        }
        
        [data-theme="dark"] .sidebar-refresh-button {
            color: var(--text-secondary-dark, #aaa);
        }
        
        [data-theme="dark"] .sidebar-refresh-button:hover {
            color: var(--accent-color);
        }
        
        @media (max-width: 768px) {
            .model-selector {
                display: none !important; /* Hide header model selector on mobile */
            }
            
            .sidebar-model-selector {
                display: block; /* Show sidebar model selector on mobile */
            }
        }
        
        /* Improve dropdown dividers for both desktop and mobile */
        .model-select optgroup,
        .sidebar-model-select optgroup {
            font-weight: 600;
            color: var(--text-primary);
            background-color: var(--background-secondary);
            padding: 5px 10px;
            margin: 2px 0;
        }
        
        .model-select option,
        .sidebar-model-select option {
            padding: 8px 10px;
            background-color: var(--background-primary);
        }
        
        /* Divider styling */
        .model-select option[disabled],
        .sidebar-model-select option[disabled] {
            height: 1px;
            margin: 9px 0;
            overflow: hidden;
            background-color: var(--border-color);
            border: none;
            opacity: 0.8;
            padding: 0;
        }
        
        /* Dark theme improvements */
        [data-theme="dark"] .model-select optgroup,
        [data-theme="dark"] .sidebar-model-select optgroup {
            color: var(--text-primary-dark, #fff);
            background-color: var(--background-secondary-dark, #222);
        }
        
        [data-theme="dark"] .model-select option,
        [data-theme="dark"] .sidebar-model-select option {
            background-color: var(--background-primary-dark, #181818);
            color: var(--text-primary-dark, #fff);
        }
        
        [data-theme="dark"] .model-select option[disabled],
        [data-theme="dark"] .sidebar-model-select option[disabled] {
            background-color: var(--border-color-dark, #444);
            opacity: 1;
        }
        
        /* Mobile modal improvements - single column layout */
        @media (max-width: 768px) {
            /* General modal adjustments for mobile */
            .modal .modal-content {
                width: 95vw;
                max-width: 95vw;
                padding: 1.5rem 1rem;
            }
            
            /* Force single column layout for modal form elements */
            .modal .form-group,
            .modal .input-group,
            .modal .button-group,
            .modal .modal-actions,
            #message-modal .modal-actions,
            #conversation-modal .modal-actions,
            #preferences-modal .modal-actions {
                flex-direction: column !important;
                width: 100% !important;
            }
            
            /* Ensure buttons and inputs take full width */
            .modal button,
            .modal input[type="text"],
            .modal input[type="password"],
            .modal input[type="email"],
            .modal select,
            .modal textarea,
            #message-modal button,
            #conversation-modal button,
            #preferences-modal button {
                width: 100% !important;
                margin: 0.5rem 0 !important;
            }
            
            /* Adjust spacing for stacked elements */
            .modal .form-group > *,
            .modal .input-group > *,
            .modal .button-group > *,
            .modal .modal-actions > * {
                margin-right: 0 !important;
                margin-bottom: 0.75rem !important;
            }
            
            /* Ensure last child has no bottom margin */
            .modal .form-group > *:last-child,
            .modal .input-group > *:last-child,
            .modal .button-group > *:last-child,
            .modal .modal-actions > *:last-child {
                margin-bottom: 0 !important;
            }
            
            /* Bot management specific adjustments */
            #bot-management-modal .bot-list-item {
                flex-direction: column !important;
                align-items: flex-start !important;
                padding: 1rem !important;
            }
            
            #bot-management-modal .bot-actions {
                width: 100% !important;
                margin-top: 1rem !important;
                justify-content: space-between !important;
            }
            
            #bot-management-modal .bot-info {
                width: 100% !important;
                margin-bottom: 0.5rem !important;
            }
        }
        
        /* Bot management modal excluded from single column layout */
        #bot-management-modal .bot-list-item,
        #bot-management-modal .bot-actions,
        #bot-management-modal .bot-info {
            /* Reset any forced column layout */
            flex-direction: initial !important;
            width: initial !important;
            margin: initial !important;
            align-items: initial !important;
            padding: initial !important;
            justify-content: initial !important;
        }
        
        /* Bot editor modal uses single column layout on mobile */
        @media (max-width: 768px) {
            #bot-editor-modal .form-group,
            #bot-editor-modal .input-group,
            #bot-editor-modal .button-group,
            #bot-editor-modal .modal-actions {
                flex-direction: column !important;
                width: 100% !important;
            }
            
            #bot-editor-modal button,
            #bot-editor-modal input[type="text"],
            #bot-editor-modal input[type="password"],
            #bot-editor-modal textarea,
            #bot-editor-modal select {
                width: 100% !important;
                margin: 0.5rem 0 !important;
            }
            
            #bot-editor-modal .form-group > *,
            #bot-editor-modal .input-group > *,
            #bot-editor-modal .button-group > *,
            #bot-editor-modal .modal-actions > * {
                margin-right: 0 !important;
                margin-bottom: 0.75rem !important;
            }
            
            #bot-editor-modal .form-group > *:last-child,
            #bot-editor-modal .input-group > *:last-child,
            #bot-editor-modal .button-group > *:last-child,
            #bot-editor-modal .modal-actions > *:last-child {
                margin-bottom: 0 !important;
            }
        }
        
        /* Bot editor layout - single column on mobile */
        @media (max-width: 768px) {
            /* Force single column layout with !important and more specific selectors */
            #bot-management-modal .bot-form-container {
                display: flex !important;
                flex-direction: column !important;
                width: 100% !important;
            }
            
            #bot-management-modal .modal-content .modal-body #bot-editor-section .bot-form-container .bot-form-column {
                width: 100% !important;
                max-width: 100% !important;
                flex: 1 1 100% !important;
                margin-right: 0 !important;
                margin-bottom: 1.5rem !important;
            }
            
            /* Ensure all form elements take full width */
            #bot-management-modal .bot-form-column input[type="text"],
            #bot-management-modal .bot-form-column input[type="number"],
            #bot-management-modal .bot-form-column textarea,
            #bot-management-modal .bot-form-column select,
            #bot-management-modal .bot-form-column button,
            #bot-management-modal .bot-form-column .knowledge-base-selector {
                width: 100% !important;
                max-width: 100% !important;
                margin: 0.5rem 0 !important;
                box-sizing: border-box !important;
            }
            
            /* Force form actions to stack */
            #bot-management-modal .form-actions {
                flex-direction: column !important;
                width: 100% !important;
            }
            
            #bot-management-modal .form-actions button {
                width: 100% !important;
                margin: 0.5rem 0 !important;
            }
            
            /* Adjust knowledge base section */
            #bot-management-modal .knowledge-base-selector {
                flex-direction: column !important;
            }
            
            #bot-management-modal .file-upload-container {
                width: 100% !important;
                margin-bottom: 1rem !important;
            }
            
            #bot-management-modal #upload-knowledge-button {
                width: 100% !important;
            }
            
            /* Fix for parameter rows */
            #bot-management-modal .parameter-row {
                flex-direction: column !important;
                align-items: flex-start !important;
                width: 100% !important;
            }
            
            #bot-management-modal .parameter-row input[type="range"] {
                width: 100% !important;
                margin: 0.5rem 0 !important;
            }
        }
        
        /* Mobile landing page fixes */
        @media (max-width: 768px) {
            .landing-page {
                padding: 1rem;
            }
            
            .landing-page h1 {
                font-size: 1.8rem;
            }
            
            .landing-page p {
                font-size: 1rem;
                margin-bottom: 1.5rem;
            }
            
            .landing-logo {
                height: 80px;
            }
            
            .prompt-suggestions-container {
                padding: 0 40px;
            }
            
            .prompt-card {
                min-width: 220px;
                max-width: 260px;
                padding: 0.8rem;
            }
            
            .carousel-button {
                width: 36px;
                height: 36px;
            }
        }
        
        /* Improve bot management modal buttons on mobile */
        @media (max-width: 768px) {
            #bot-management-modal .modal-header {
                flex-direction: column;
                align-items: stretch;
                gap: 1rem;
            }
            
            #bot-management-modal .header-left {
                text-align: center;
            }
            
            #bot-management-modal .header-right {
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
            }
            
            #bot-management-modal #create-new-bot-button,
            #bot-management-modal #back-to-bot-list-button {
                width: 100%;
                margin: 0;
                padding: 0.75rem;
                font-size: 1rem;
                text-align: center;
                justify-content: center;
            }
            
            #bot-management-modal .close-button {
                position: absolute;
                top: 1rem;
                right: 1rem;
            }
        }
        
        /* Ensure all modal close buttons are positioned in the top-right corner on mobile */
        @media (max-width: 768px) {
            /* General close button positioning for all modals */
            .modal .close-button,
            .modal .close-modal,
            #message-modal .close-button,
            #conversation-modal .close-button,
            #preferences-modal .close-button,
            #auth-modal .close-auth-modal,
            #messages-modal #close-messages-modal,
            #delete-confirm-modal .close-button {
                position: absolute !important;
                top: 0.75rem !important;
                right: 0.75rem !important;
                margin: 0 !important;
                padding: 0.5rem !important;
                font-size: 1.25rem !important;
                line-height: 1 !important;
                z-index: 10 !important;
            }
            
            /* Ensure modal headers have enough padding for the close button */
            .modal .modal-header,
            .modal-content > h3,
            .modal-content > .auth-header {
                padding-right: 2.5rem !important;
                position: relative !important;
            }
        }
        
        /* Initial Loading Screen */
        .initial-loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-primary, #f5f7fa);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 1;
            transition: opacity 0.5s ease-out;
        }
        
        [data-theme="dark"] .initial-loading-screen {
            background-color: var(--bg-primary-dark, #1a1a1a);
        }
        
        .loading-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
        }
        
        .loading-logo {
            width: auto;
            height: 120px;
            margin-bottom: 1rem;
            animation: pulse 1.5s infinite alternate;
        }
        
        .initial-loading-screen h1 {
            font-size: 2.5rem;
            margin: 0.5rem 0;
            color: var(--text-accent, #3b82f6);
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            letter-spacing: 1px;
        }
        
        .initial-loading-screen .version-number {
            font-size: 1.5rem;
            vertical-align: super;
            margin-left: 2px;
        }
        
        .loading-message {
            font-size: 1.1rem;
            color: var(--text-secondary, #6b7280);
            margin-top: 1rem;
        }
        
        /* Loading dots animation */
        .loading-dots {
            display: flex;
            gap: 8px;
            margin: 1rem 0;
        }
        
        .loading-dots span {
            width: 10px;
            height: 10px;
            background-color: var(--text-accent, #3b82f6);
            border-radius: 50%;
            display: inline-block;
            animation: loadingDots 1.4s infinite ease-in-out both;
        }
        
        .loading-dots span:nth-child(1) {
            animation-delay: -0.32s;
        }
        
        .loading-dots span:nth-child(2) {
            animation-delay: -0.16s;
        }
        
        @keyframes loadingDots {
            0%, 80%, 100% {
                transform: scale(0);
                opacity: 0.3;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        /* Mobile adjustments for loading screen */
        @media (max-width: 768px) {
            .loading-logo {
                height: 90px;
            }
            
            .initial-loading-screen h1 {
                font-size: 2rem;
            }
            
            .loading-message {
                font-size: 1rem;
            }
        }
        
        /* Hide loading screen when platform is ready */
        .initial-loading-screen.loaded {
            opacity: 0;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <!-- Initial Loading Screen -->
    <div id="initial-loading-screen" class="initial-loading-screen">
        <div class="loading-content">
            <img src="/static/assets/bigxeno.png" alt="MIDAS Logo" class="loading-logo">
            <div class="loading-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <p class="loading-message">Flexing the tentacles...</p>
        </div>
    </div>
    
    <div class="app-container">
        <header class="header">
            <div class="header-left">
                <button id="sidebar-toggle" class="sidebar-toggle" title="Toggle Sidebar">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            
            <div class="header-center">
                <div class="chat-info">
                    <div class="chat-title-container">
                        <h2 id="chat-title" class="chat-title">New Chat</h2>
                        <div class="title-actions">
                            <button id="edit-title-button" class="title-action-button" title="Edit Title">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button id="delete-conversation-button" class="title-action-button" title="Delete Conversation">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <div id="chat-model" class="chat-model">Select a model</div>
                </div>
                
                <!-- Mobile logo (only visible on mobile) -->
                <div class="mobile-logo">
                    <img src="/static/assets/xeno.png" alt="MIDAS Logo" height="32">
                </div>
                <div class="mobile-chat-info" id="mobile-chat-info" style="display: none;">
                    <div class="mobile-chat-title" id="mobile-chat-title">New Chat</div>
                    <div class="mobile-chat-model" id="mobile-chat-model">Select a model</div>
                </div>
            </div>
            
            <div class="header-controls">
                <!-- Mobile messages button (only visible on mobile) -->
                <button id="mobile-messages-button" class="mobile-header-button" title="Messages">
                    <i class="fas fa-comments"></i>
                </button>
                
                <div class="model-selector">
                    <select id="model-select" class="model-select">
                        <option value="" disabled selected>Loading models...</option>
                    </select>
                    <button id="refresh-models" class="refresh-button">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </div>
        </header>
        
        <div class="main-content">
            <div class="sidebar">
                <div class="sidebar-header">
                </div>
                <div class="sidebar-actions">
                    <!-- Mobile model selector (only visible on mobile) -->
                    <div class="sidebar-model-selector">
                        <div class="sidebar-model-select-container">
                            <select id="sidebar-model-select" class="sidebar-model-select">
                                <option value="" disabled selected>Loading models...</option>
                            </select>
                            <button id="sidebar-refresh-models" class="sidebar-refresh-button">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                    </div>
                    
                    <button id="new-chat-button" class="new-chat-button">
                        <i class="fas fa-plus"></i>
                        <span>New Chat</span>
                    </button>
                    <button id="toggle-secret-chat" class="sidebar-button" onclick="toggleSecretChatMode()">
                        <i class="fas fa-user-secret"></i>
                        <span>Secret Chat</span>
                    </button>
                    <button id="manage-bots-button" class="sidebar-button admin-only">
                        <i class="fas fa-robot"></i>
                        <span>Manage Bots</span>
                    </button>
                    
                    <button id="preferences-button" class="sidebar-button preferences-button">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </button>
                </div>
                <div id="conversation-list" class="conversation-list">
                    <!-- Conversation items will be added here -->
                </div>
                
                <!-- Sidebar User Section -->
                <div class="sidebar-user-section">
                    <div class="sidebar-user-info">
                        <div class="user-avatar">
                            <i class="fas fa-user-circle"></i>
                        </div>
                        <div class="user-details">
                            <span id="sidebar-user-info"></span>
                        </div>
                    </div>
                    <button id="sidebar-logout-btn">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Logout</span>
                    </button>
                </div>
            </div>
            
            <div class="chat-panel">
                <div id="chat-container" class="chat-container">
                    <!-- Landing page will be shown when no conversation is active -->
                    <div id="landing-page" class="landing-page">
                        <img src="/static/assets/bigxeno.png" alt="MIDAS Logo" class="landing-logo">
                        <h1>Welcome to MIDAS 3.0</h1>
                        <p>Your AI assistant for chat, coding, image generation, and more. Select a model and try one of these prompts to get started.</p>
                        
                        <div class="prompt-suggestions-container">
                            <button class="carousel-button prev">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <div class="prompt-suggestions">
                                <!-- Prompt suggestions will be dynamically added here -->
                            </div>
                            <button class="carousel-button next">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="message-input-container">
                    <div id="upload-status" class="upload-status-indicator"></div>
                    <div class="message-input-wrapper">
                        <textarea id="message-input" 
                               class="message-input" 
                               placeholder="Type your message..."></textarea>
                        <div id="attachment-preview">
                            <span></span> <!-- Filename will go here -->
                            <span class="remove-attachment" title="Remove attachment">&times;</span>
                        </div>
                        <button id="file-upload-button" class="file-upload-button" title="Attach document">
                            <i class="fas fa-paperclip"></i>
                        </button>
                        <button id="send-button" class="send-button" title="Send message">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                    <input type="file" id="doc-upload-input" accept=".txt,.pdf,.md,.xml" style="display: none">
                </div>
            </div>
        </div>
        
        <!-- Loading Animation -->
        <div id="loading-animation" class="loading-animation">
            <img src="/static/assets/xeno.png" alt="Loading" class="loading-image">
            <div class="loading-pulse"></div>
        </div>
        
        <!-- Delete Confirmation Modal -->
        <div id="delete-confirm-modal" class="modal" style="display:none;">
            <div class="modal-content">
                <h3>Delete Conversation</h3>
                <p>Are you sure you want to delete this conversation?</p>
                <div class="modal-actions">
                    <button id="confirm-delete" class="danger-button">Delete</button>
                    <button id="cancel-delete" class="secondary-button">Cancel</button>
                </div>
            </div>
        </div>
        
        <!-- Preferences Modal -->
        <div id="preferences-modal" class="modal" style="display:none;">
            <div class="modal-content preferences-modal-content">
                <h3>Settings</h3>
                <div class="preferences-tabs">
                    <button class="tab-button active" data-tab="models">Models</button>
                    <button class="tab-button" data-tab="appearance">Appearance</button>
                    <button class="tab-button" data-tab="user">User</button>
                    <button class="tab-button admin-only" data-tab="admin">Admin</button>
                </div>
                
                <!-- Loading animation for preferences -->
                <div id="preferences-loading" class="preferences-loading">
                    <img src="/static/assets/xeno.png" alt="Loading preferences">
                    <p>Loading preferences...</p>
                </div>
                
                <div class="tab-content" id="models-tab">
                    <div class="preference-group">
                        <label for="default-model">Default Chat Model</label>
                        <select id="default-model" class="preference-select">
                            <!-- Options will be populated by JavaScript -->
                        </select>
                        <p class="preference-description">Model used for new conversations</p>
                    </div>
                    
                    <div class="preference-group">
                        <label for="default-embedding-model">Default Embedding Model</label>
                        <select id="default-embedding-model" class="preference-select">
                            <!-- Options will be populated by JavaScript -->
                        </select>
                        <p class="preference-description">Used for RAG document indexing</p>
                    </div>
                    
                    <div class="preference-group">
                        <label>Visible Models</label>
                        <div id="visible-models-container" class="checkbox-group">
                            <!-- Checkboxes will be populated by JavaScript -->
                        </div>
                        <p class="preference-description">Control which models appear in the dropdown</p>
                    </div>
                </div>
                <div class="tab-content" id="appearance-tab" style="display: none;">
                    <div class="preference-group">
                        <label>Theme</label>
                        <div class="radio-group">
                            <label>
                                <input type="radio" name="theme" value="light">
                                Light
                            </label>
                            <label>
                                <input type="radio" name="theme" value="dark">
                                Dark
                            </label>
                            <label>
                                <input type="radio" name="theme" value="system">
                                System (auto)
                            </label>
                        </div>
                    </div>
                    
                    <div class="preference-group">
                        <label>Thinking Process</label>
                        <div class="checkbox-option">
                            <label for="show-thinking" style="display: flex; align-items: center; gap: 0.5rem; margin: 0; cursor: pointer;">
                                <input type="checkbox" id="show-thinking" name="show-thinking">
                                Show thinking process by default
                            </label>
                            <p class="preference-description">When enabled, the model's thinking process will be automatically expanded in responses</p>
                        </div>
                    </div>
                </div>
                <div class="tab-content" id="user-tab" style="display: none;">
                    <div class="preference-group">
                        <label for="display-name">Display Name</label>
                        <input type="text" id="display-name" class="preference-input" placeholder="Your display name">
                        <p class="preference-description">This name will be shown in the user interface</p>
                    </div>
                    
                    <div class="preference-group">
                        <label for="user-email">Email Address</label>
                        <input type="email" id="user-email" class="preference-input" placeholder="Your email address">
                        <p class="preference-description">Used for account recovery and notifications</p>
                    </div>
                    
                    <div class="preference-group">
                        <button id="save-user-info-btn" class="auth-submit-btn">Save Changes</button>
                        <div id="user-info-update-status" class="update-status"></div>
                    </div>
                    
                    <div class="preference-group">
                        <label for="current-password">Current Password</label>
                        <input type="password" id="current-password" class="preference-input" placeholder="Enter current password">
                    </div>
                    
                    <div class="preference-group">
                        <label for="new-password">New Password</label>
                        <input type="password" id="new-password" class="preference-input" placeholder="Enter new password">
                    </div>
                    
                    <div class="preference-group">
                        <label for="confirm-password">Confirm New Password</label>
                        <input type="password" id="confirm-password" class="preference-input" placeholder="Confirm new password">
                    </div>
                    
                    <div id="password-update-status" class="update-status"></div>
                </div>
                <div class="tab-content" id="admin-tab" style="display: none;">
                    <div class="preference-group">
                        <h4>User Management</h4>
                        <div id="user-management-loading" class="centered-loading">
                            <img src="/static/assets/xeno.png" alt="Loading" class="loading-spinner">
                            <p>Loading users...</p>
                        </div>
                        
                        <div id="user-list-container" style="display: none;">
                            <table class="user-table">
                                <thead>
                                    <tr>
                                        <th>Username</th>
                                        <th>Display Name</th>
                                        <th>Email</th>
                                        <th>Role</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="user-list">
                                    <!-- User rows will be added here dynamically -->
                                </tbody>
                            </table>
                        </div>
                        
                        <div id="user-management-error" class="error-message" style="display: none;"></div>
                    </div>
                    
                    <!-- User Quota Management Section -->
                    <div class="preference-group">
                        <h4>User Quota Management</h4>
                        <p class="preference-description">Configure message quotas and attachment size limits for users</p>
                        
                        <div id="quota-management-container">
                            <div class="quota-selector">
                                <label for="quota-user-select">Select User:</label>
                                <select id="quota-user-select" class="preference-input">
                                    <option value="" disabled selected>Select a user</option>
                                    <!-- User options will be populated dynamically -->
                                </select>
                            </div>
                            
                            <div id="quota-settings" style="display: none;">
                                <div class="quota-setting">
                                    <label for="daily-message-limit">Daily Message Limit:</label>
                                    <input type="number" id="daily-message-limit" class="preference-input" min="0" placeholder="Daily limit (e.g., 100)">
                                    <p class="preference-description">Maximum number of messages per day (0 for unlimited)</p>
                                </div>
                                
                                <div class="quota-setting">
                                    <label for="monthly-message-limit">Monthly Message Limit:</label>
                                    <input type="number" id="monthly-message-limit" class="preference-input" min="0" placeholder="Monthly limit (e.g., 3000)">
                                    <p class="preference-description">Maximum number of messages per month (0 for unlimited)</p>
                                </div>
                                
                                <div class="quota-setting">
                                    <label for="max-attachment-size">Max Attachment Size (KB):</label>
                                    <input type="number" id="max-attachment-size" class="preference-input" min="0" placeholder="Size in KB (e.g., 5120)">
                                    <p class="preference-description">Maximum attachment size in KB (0 for no attachments, 5120 = 5MB)</p>
                                </div>
                                
                                <div class="quota-usage">
                                    <h5>Current Usage</h5>
                                    <div id="quota-usage-stats">
                                        <p>Daily: <span id="daily-quota-usage" class="quota-value">0/0</span></p>
                                        <p>Monthly: <span id="monthly-quota-usage" class="quota-value">0/0</span></p>
                                    </div>
                                </div>
                                
                                <div class="quota-actions">
                                    <button id="save-quota-btn" class="primary-button">Save Quota Settings</button>
                                    <button id="reset-quota-btn" class="secondary-button">Reset Usage Counters</button>
                                </div>
                                
                                <div id="quota-update-status" class="update-status"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button id="save-preferences" class="primary-button">Save</button>
                    <button id="cancel-preferences" class="secondary-button">Cancel</button>
                </div>
            </div>
        </div>
        
        <!-- Loading animation for preferences -->
        <div id="loading-animation" class="loading-animation">
            <img src="/static/assets/xeno.png" alt="Loading" class="loading-image">
            <div class="loading-pulse"></div>
        </div>
        
        <!-- Bot Management Modal -->
        <div id="bot-management-modal" class="modal" style="display:none;">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="header-left">
                        <h2 id="bot-modal-title">Bot Management</h2>
                    </div>
                    <div class="header-right">
                        <button id="create-new-bot-button" class="primary-button">Create New Bot</button>
                        <button id="back-to-bot-list-button" class="secondary-button" style="display: none;">Back to List</button>
                        <button class="close-button" id="close-bot-modal">&times;</button>
                    </div>
                </div>
                
                <div class="modal-body">
                    <!-- Bot List Section -->
                    <div id="bot-list-section">
                        <div id="bot-list-container" class="bot-list">
                            <!-- Bot items will be added here dynamically -->
                            <div class="loading-container">
                                <img src="/static/assets/xeno.png" alt="Loading" class="loading-spinner">
                                <p>Loading bots...</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Bot Editor Section (initially hidden) -->
                    <div id="bot-editor-section" style="display: none;">
                        <form id="bot-form">
                            <input type="hidden" id="bot-id" value="">
                            
                            <div class="bot-form-container">
                                <div class="bot-form-column">
                                    <div class="form-group">
                                        <label for="bot-name">Bot Name</label>
                                        <input type="text" id="bot-name" placeholder="Enter a name for your bot" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="bot-description">Description</label>
                                        <textarea id="bot-description" placeholder="Describe what this bot does" rows="2"></textarea>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="bot-greeting">Greeting Message</label>
                                        <textarea id="bot-greeting" placeholder="Message to display when a user starts a chat with this bot" rows="2"></textarea>
                                    </div>
                                    
                                    <div class="form-group">
                                        <div class="tooltip tooltip-right">
                                            <label for="bot-base-model">Base Model</label>
                                            <span class="tooltip-text">Select the primary language model for generating responses. Different models have varying capabilities, strengths, and response styles.</span>
                                        </div>
                                        <select id="bot-base-model" required>
                                            <!-- Will be populated dynamically -->
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <div class="tooltip tooltip-right">
                                            <label for="bot-embedding-model">Embedding Model</label>
                                            <span class="tooltip-text">Choose the model used for converting text into numerical representations. This affects the quality of semantic search and knowledge retrieval.</span>
                                        </div>
                                        <select id="bot-embedding-model" required>
                                            <!-- Will be populated dynamically -->
                                        </select>
                                    </div>
                                </div>
                                <div class="bot-form-column">
                                    <div class="form-group">
                                        <label for="bot-system-prompt">System Prompt</label>
                                        <textarea id="bot-system-prompt" placeholder="Instructions for the bot's behavior" rows="5"></textarea>
                                    </div>
                                    <div class="knowledge-files-section">
                                        <h4>Knowledge Files</h4>
                                        <div class="knowledge-files-controls">
                                            <button type="button" id="upload-knowledge-button" class="btn btn-primary btn-sm">
                                                <i class="fas fa-upload"></i> Upload Files
                                            </button>
                                            <button type="button" id="reindex-knowledge-button" class="btn btn-secondary btn-sm">
                                                <i class="fas fa-sync"></i> Re-index Files
                                            </button>
                                            <input type="file" id="knowledge-file-input" multiple style="display: none;">
                                        </div>
                                        <div class="knowledge-base-selector">
                                            
                                            <!-- Document Processing Progress Indicator -->
                                            <div id="processing-progress" class="processing-progress">
                                                <h4 class="progress-status">Processing documents...</h4>
                                                <div class="progress-bar-container">
                                                    <div class="progress-bar"></div>
                                                </div>
                                                <div class="progress-stats">
                                                    <span>Chunks processed: <span class="chunks-processed">0</span></span>
                                                    <span>Processing time: <span class="processing-time">0</span>s</span>
                                                </div>
                                                <div class="file-progress-list">
                                                    <!-- File progress items will be added here -->
                                                </div>
                                            </div>
                                            
                                            <!-- Upload Progress Container (for re-indexing) -->
                                            <div id="upload-progress-container" style="display: none;">
                                                <div class="progress-header">
                                                    <h4>Re-indexing Knowledge Base</h4>
                                                    <span id="upload-progress-text">Starting re-indexing...</span>
                                                </div>
                                                <div class="progress-bar-container">
                                                    <div id="upload-progress-bar" class="progress-bar"></div>
                                                </div>
                                                <div id="processing-details" class="progress-details">
                                                    <!-- Processing details will be shown here -->
                                                </div>
                                            </div>
                                            
                                            <div id="knowledge-files-list" class="knowledge-files-list">
                                                <!-- Knowledge files will be listed here -->
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>Model Parameters</label>
                                        <div class="parameters-container">
                                            <div class="parameter-row">
                                                <div class="tooltip">
                                                    <label for="bot-temperature">Temperature</label>
                                                    <span class="tooltip-text">Controls the randomness of the model's responses. Higher values (0.8-2.0) make output more creative and diverse, while lower values (0.0-0.2) make it more focused and deterministic.</span>
                                                </div>
                                                <input type="range" id="bot-temperature" min="0" max="2" step="0.1" value="0.7">
                                                <span id="temperature-value">0.7</span>
                                            </div>
                                            
                                            <div class="parameter-row">
                                                <div class="tooltip">
                                                    <label for="bot-top-p">Top P</label>
                                                    <span class="tooltip-text">Nucleus sampling parameter that controls the model's token selection. Lower values (0.1-0.3) make responses more precise, while higher values (0.7-1.0) allow more diverse token choices.</span>
                                                </div>
                                                <input type="range" id="bot-top-p" min="0" max="1" step="0.05" value="0.9">
                                                <span id="top-p-value">0.9</span>
                                            </div>
                                            
                                            <div class="parameter-row">
                                                <div class="tooltip">
                                                    <label for="bot-max-tokens">Max Tokens</label>
                                                    <span class="tooltip-text">Maximum number of tokens the model can generate in a single response. Higher values allow longer responses, while lower values keep responses concise.</span>
                                                </div>
                                                <input type="number" id="bot-max-tokens" min="100" max="4096" value="2048">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-actions">
                                    <button type="submit" id="save-bot-button" class="primary-button">Save Bot</button>
                                    <button type="button" id="cancel-bot-edit" class="secondary-button">Cancel</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Loading animation for preferences -->
        <div id="loading-animation" class="loading-animation">
            <img src="/static/assets/xeno.png" alt="Loading" class="loading-image">
            <div class="loading-pulse"></div>
        </div>
        
        <!-- Messages Modal -->
        <div id="messages-modal" class="modal" style="display:none;">
            <div class="modal-content messages-modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-comments"></i> Conversations</h3>
                    <button id="close-messages-modal" class="close-modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="messages-search">
                        <input type="text" id="messages-search-input" placeholder="Search conversations...">
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="messages-list">
                        <!-- Conversation items will be cloned here from the sidebar -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Quota Exceeded Modal -->
<div id="quota-exceeded-modal" class="modal" style="display:none;">
    <div class="modal-content">
        <div class="modal-header">
            <div class="header-left">
                <h3><i class="fas fa-exclamation-triangle"></i> Message Quota Exceeded</h3>
            </div>
            <button id="close-quota-modal" class="close-modal">&times;</button>
        </div>
        <div class="modal-body">
            <div class="quota-modal-layout">
                <div class="quota-modal-icon">
                    <img src="/static/assets/xenostop.png" alt="Quota Exceeded" class="quota-icon" style="width: 80%; height: auto;">
                </div>
                <div class="quota-modal-info">
                    <p id="quota-message" class="quota-message">You have reached your message quota limit.</p>
                    <div id="quota-details" class="quota-details">
                        <div class="quota-stat">
                            <i class="fas fa-calendar-day"></i>
                            <span>Daily usage:</span>
                            <span id="daily-quota-usage" class="quota-value">0/0</span>
                        </div>
                        <div class="quota-stat">
                            <i class="fas fa-calendar-alt"></i>
                            <span>Monthly usage:</span>
                            <span id="monthly-quota-usage" class="quota-value">0/0</span>
                        </div>
                    </div>
                    <p class="quota-info">Please contact your administrator if you need your quota increased.</p>
                </div>
            </div>
        </div>
        <div class="modal-actions">
            <button id="confirm-quota-modal" class="primary-button">Understand</button>
        </div>
    </div>
</div>
        
        <!-- Template for chat messages -->
        <template id="message-template">
            <div class="message">
                <div class="message-sender"></div>
                <div class="message-content"></div>
                <div class="message-attachment" style="display: none;"> <!-- Hidden by default -->
                    <!-- Attachment will go here -->
                </div>
                <div class="message-thinking" style="display: none;">Thinking...</div>
                <div class="message-images"></div>
            </div>
        </template>
        
        <!-- User Auth Modal and Menu -->
        <div id="auth-overlay" class="auth-overlay" style="display:none;"></div>
        <div id="auth-modal" class="auth-modal" style="display:none;">
            <div class="auth-content">
                <div class="auth-header">
                    <img src="/static/assets/xeno.png" alt="MIDAS3" class="auth-logo">
                    <h1>MIDAS<span class="version-number">3</span></h1>
                </div>
                <button id="close-auth-modal" class="close-modal">&times;</button>
                <div id="auth-tabs" class="auth-tabs">
                    <button id="show-login" class="auth-tab active">Login</button>
                    <button id="show-register" class="auth-tab">Register</button>
                </div>
                <form id="login-form" class="auth-form">
                    <div class="input-group">
                        <i class="fas fa-user input-icon"></i>
                        <input type="text" id="login-username" placeholder="Username" required>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-lock input-icon"></i>
                        <input type="password" id="login-password" placeholder="Password" required>
                    </div>
                    <div class="remember-me-container">
                        <label for="remember-me">
                            <input type="checkbox" id="remember-me" class="styled-checkbox">
                            Remember Me
                        </label>
                    </div>
                    <button type="submit" class="auth-submit-btn">Login</button>
                    <div class="auth-error" id="login-error"></div>
                </form>
                <form id="register-form" class="auth-form" style="display:none;">
                    <div class="input-group">
                        <i class="fas fa-user input-icon"></i>
                        <input type="text" id="register-username" placeholder="Username" required>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-envelope input-icon"></i>
                        <input type="email" id="register-email" placeholder="Email address" required>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-lock input-icon"></i>
                        <input type="password" id="register-password" placeholder="Password" required>
                    </div>
                    <div class="password-strength-container">
                        <!-- Password strength progress bar -->
                        <div class="strength-indicator">
                            <span id="strength-label" class="strength-label"></span>
                            <div class="strength-bar">
                                <div id="password-strength-fill" class="strength-fill"></div>
                            </div>
                            <div class="strength-info-icon" id="password-info-icon">
                                <i class="fas fa-info-circle"></i>
                            </div>
                        </div>
                        <div id="strength-requirements" class="strength-requirements"></div>
                        <!-- Password tooltip -->
                        <div id="password-tooltip" class="password-tooltip">
                            <p>Strong password should have:</p>
                            <ul>
                                <li>At least 8 characters</li>
                                <li>Uppercase letters (A-Z)</li>
                                <li>Lowercase letters (a-z)</li>
                                <li>Numbers (0-9)</li>
                                <li>Special characters (!@#$%^&*)</li>
                            </ul>
                        </div>
                    </div>
                    <div class="terms-checkbox-container">
                        <label for="terms-checkbox">
                            <input type="checkbox" id="terms-checkbox" class="styled-checkbox" required>
                            <span>I agree to the <a href="#" id="terms-link">Terms and Conditions</a> and <a href="#" id="privacy-link">Privacy Policy</a></span>
                        </label>
                    </div>
                    <button type="submit" class="auth-submit-btn">Register</button>
                    <div class="auth-error" id="register-error"></div>
                </form>
                <div class="auth-error" id="password-error"></div>
            </div>
        </div>
        <div id="user-menu" class="user-menu" style="display:none;">
            <span id="user-info"></span>
            <button id="logout-btn" style="font-size: 0.9em;"><i class="fas fa-sign-out-alt"></i> Logout</button>
        </div>
    </div>

    <!-- Terms and Conditions Modal -->
    <div id="terms-modal" class="legal-modal" style="display:none;">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <img src="/static/assets/xeno.png" alt="MIDAS3">
                <div class="modal-title">
                    <span class="modal-logo-text">MIDAS3</span>
                    <h3>Terms and Conditions</h3>
                </div>
                <button id="close-terms-modal" class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="legal-content">
                    <p class="legal-date"><strong>Last Updated:</strong> May 7, 2025</p>
                    <p>Welcome to MIDAS3. By using our services, you agree to these terms. Please read them carefully.</p>
                    
                    <h4>1. Acceptance of Terms</h4>
                    <p>By accessing or using MIDAS3, you agree to be bound by these Terms and Conditions and all applicable laws and regulations. If you do not agree with any of these terms, you are prohibited from using or accessing this platform.</p>
                    
                    <h4>2. Use License</h4>
                    <p>Permission is granted to temporarily use MIDAS3 for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title, and under this license you may not:</p>
                    <ul>
                        <li>modify or copy the materials;</li>
                        <li>use the materials for any commercial purpose;</li>
                        <li>attempt to decompile or reverse engineer any software contained on MIDAS3;</li>
                        <li>remove any copyright or other proprietary notations from the materials; or</li>
                        <li>transfer the materials to another person or "mirror" the materials on any other server.</li>
                    </ul>
                    
                    <h4>3. Disclaimer</h4>
                    <p>The materials on MIDAS3 are provided on an 'as is' basis. We make no warranties, expressed or implied, and hereby disclaim and negate all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights.</p>
                    
                    <h4>4. Limitations</h4>
                    <p>In no event shall MIDAS3 or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on MIDAS3, even if we or an authorized representative has been notified orally or in writing of the possibility of such damage.</p>
                    
                    <h4>5. Content Generation</h4>
                    <p>MIDAS3 uses AI to generate content. We do not guarantee the accuracy, completeness, or usefulness of any generated content. Users are responsible for evaluating and verifying any information provided by the system.</p>
                    
                    <h4>6. User Conduct</h4>
                    <p>You agree not to use MIDAS3 to:</p>
                    <ul>
                        <li>Violate any applicable laws or regulations;</li>
                        <li>Infringe upon the rights of others;</li>
                        <li>Generate harmful, threatening, or abusive content;</li>
                        <li>Attempt to gain unauthorized access to any portion of the platform;</li>
                        <li>Interfere with the proper functioning of the service.</li>
                    </ul>
                    
                    <h4>7. Revisions and Errata</h4>
                    <p>The materials appearing on MIDAS3 could include technical, typographical, or photographic errors. We do not warrant that any of the materials on its website are accurate, complete, or current. We may make changes to the materials contained on its website at any time without notice.</p>
                    
                    <h4>8. Governing Law</h4>
                    <p>These terms and conditions are governed by and construed in accordance with the laws and you irrevocably submit to the exclusive jurisdiction of the courts in that location.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="terms-accept-btn" class="auth-submit-btn">I Understand</button>
            </div>
        </div>
    </div>
    
    <!-- Privacy Policy Modal -->
    <div id="privacy-modal" class="legal-modal" style="display:none;">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <img src="/static/assets/xeno.png" alt="MIDAS3">
                <div class="modal-title">
                    <span class="modal-logo-text">MIDAS3</span>
                    <h3>Privacy Policy</h3>
                </div>
                <button id="close-privacy-modal" class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="legal-content">
                    <p class="legal-date"><strong>Last Updated:</strong> May 7, 2025</p>
                    <p>This Privacy Policy describes how MIDAS3 collects, uses, and discloses your information when you use our service.</p>
                    
                    <h4>1. Information We Collect</h4>
                    <p>We collect several types of information from and about users of our platform, including:</p>
                    <ul>
                        <li><strong>Personal Information:</strong> Email address, username, and any other information you provide during registration.</li>
                        <li><strong>Usage Data:</strong> Information about how you interact with our service, including conversation history, prompts, and generated responses.</li>
                        <li><strong>Technical Data:</strong> IP address, browser type, device information, and cookies.</li>
                    </ul>
                    
                    <h4>2. How We Use Your Information</h4>
                    <p>We use the information we collect to:</p>
                    <ul>
                        <li>Provide, maintain, and improve our services;</li>
                        <li>Process and complete transactions;</li>
                        <li>Send you technical notices and support messages;</li>
                        <li>Respond to your comments and questions;</li>
                        <li>Develop new products and services;</li>
                        <li>Monitor and analyze trends, usage, and activities;</li>
                        <li>Detect, investigate, and prevent fraudulent transactions and other illegal activities.</li>
                    </ul>
                    
                    <h4>3. Data Storage and Security</h4>
                    <p>We implement appropriate technical and organizational measures to protect your personal information. However, no method of transmission over the Internet or electronic storage is 100% secure, and we cannot guarantee absolute security.</p>
                    
                    <h4>4. Data Retention</h4>
                    <p>We retain your personal information for as long as necessary to fulfill the purposes outlined in this Privacy Policy, unless a longer retention period is required or permitted by law.</p>
                    
                    <h4>5. Your Rights</h4>
                    <p>Depending on your location, you may have certain rights regarding your personal information, including:</p>
                    <ul>
                        <li>Access to your personal information;</li>
                        <li>Correction of inaccurate or incomplete information;</li>
                        <li>Deletion of your personal information;</li>
                        <li>Restriction or objection to processing;</li>
                        <li>Data portability.</li>
                    </ul>
                    
                    <h4>6. Children's Privacy</h4>
                    <p>Our service is not intended for children under 13 years of age, and we do not knowingly collect personal information from children under 13.</p>
                    
                    <h4>7. Changes to This Privacy Policy</h4>
                    <p>We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last Updated" date.</p>
                    
                    <h4>8. Contact Us</h4>
                    <p>If you have any questions about this Privacy Policy, please contact us.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="privacy-accept-btn" class="auth-submit-btn">I Understand</button>
            </div>
        </div>
    </div>

    <script src="static/js/main.js"></script>
    <script src="static/js/auth.js"></script>
</body>
</html>
